<!DOCTYPE html>
<html>
<head>
    <title>Admin Panel</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
    <style>
        body { font-family: sans-serif; background: #eee; padding: 20px; }
        .card { background: white; padding: 20px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        button { padding: 15px 30px; font-size: 16px; cursor: pointer; border: none; font-weight: bold; border-radius: 4px; margin-right: 10px; }
        .start { background: #2e7d32; color: white; }
        .pause { background: #f9a825; color: white; }
        .resume { background: #1565c0; color: white; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        td, th { padding: 10px; border-bottom: 1px solid #ddd; text-align: left; }
    </style>
</head>
<body>
    <h1>Organizer Dashboard</h1>
    
    <div class="card">
        <h2>Game Controls</h2>
        <div style="margin-bottom: 15px;">
            <button class="start" onclick="act('start')">▶ START GAME</button>
            <button class="pause" onclick="act('pause')">⏸ PAUSE</button>
            <button class="resume" onclick="act('resume')">⏯ RESUME</button>
        </div>
        <p><strong>Status:</strong> <span id="status" style="font-weight:bold; color:blue;">LOBBY</span> | <strong>Day:</strong> <span id="day">1</span>/12</p>
    </div>

    <div class="card">
        <h2>Live Leaderboard</h2>
        <table>
            <thead><tr><th>Rank</th><th>Trader</th><th>Portfolio Value</th></tr></thead>
            <tbody id="lb"></tbody>
        </table>
    </div>

    <script>
        const socket = io();
        
        function act(action) {
            socket.emit('admin_action', {action: action});
        }

        socket.on('leaderboard_update', (data) => {
            let html = "";
            data.forEach((p, i) => {
                let color = i===0 ? '#ffd700' : '#000';
                let weight = i===0 ? 'bold' : 'normal';
                html += `<tr style="color:${color}; font-weight:${weight}">
                    <td>${i+1}</td><td>${p.name}</td><td>₹${p.value.toLocaleString()}</td>
                </tr>`;
            });
            document.getElementById('lb').innerHTML = html;
        });

        socket.on('game_status', (d) => {
            document.getElementById('status').innerText = d.status.toUpperCase();
            document.getElementById('day').innerText = d.day;
        });
    </script>
</body>
</html>
